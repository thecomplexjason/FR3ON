local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local displayName = LocalPlayer and LocalPlayer.DisplayName or "Unknown"

local PlotsFolder = workspace:WaitForChild("Plots")

for _, model in ipairs(PlotsFolder:GetChildren()) do
	if model:IsA("Model") then
		local plotSign = model:FindFirstChild("PlotSign")
		if plotSign and plotSign:IsA("BasePart") then
			local surfaceGui = plotSign:FindFirstChildWhichIsA("SurfaceGui")
			if surfaceGui then
				local frame = surfaceGui:FindFirstChildWhichIsA("Frame")
				if frame then
					local textLabel = frame:FindFirstChildWhichIsA("TextLabel")
					if textLabel then
						local function extractDisplayName(text)
							-- لو النص مكتوب بالشكل: "Zeko's Base"
							return string.match(text, "^(.-)'s Base$")
						end

						local extractedName = extractDisplayName(textLabel.Text)

						if extractedName == displayName then
							-- Create invisible part above the house
							local part = Instance.new("Part")
							part.Anchored = true
							part.CanCollide = false
							part.Transparency = 1
							part.Size = Vector3.new(0.5, 0.5, 0.5)
							part.Position = model:GetModelCFrame().p + Vector3.new(0, 6, 0)
							part.Parent = workspace

							-- BillboardGui
							local billboard = Instance.new("BillboardGui")
							billboard.Size = UDim2.new(0, 150, 0, 30)
							billboard.StudsOffset = Vector3.new(0, 1.5, 0)
							billboard.AlwaysOnTop = true
							billboard.Adornee = part
							billboard.Parent = part

							local label = Instance.new("TextLabel")
							label.Size = UDim2.new(1, 0, 1, 0)
							label.BackgroundTransparency = 1
							label.TextColor3 = Color3.new(1, 1, 1)
							label.TextStrokeColor3 = Color3.new(0, 0, 0)
							label.TextStrokeTransparency = 0.2
							label.TextScaled = true
							label.Font = Enum.Font.GothamBold
							label.Text = "Your Base"
							label.Parent = billboard

							-- تحديث كل نص ثانية
							task.spawn(function()
								while true do
									local currentExtracted = extractDisplayName(textLabel.Text)
									if currentExtracted == displayName then
										label.Text = "Your Base"
									else
										label.Text = ""
									end
									task.wait(0.5)
								end
							end)
						end
					end
				end
			end
		end
	end
end
