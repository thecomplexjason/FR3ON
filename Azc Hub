local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local playerDisplayName = LocalPlayer and LocalPlayer.DisplayName or "Unknown"

local PlotsFolder = workspace:WaitForChild("Plots")

-- البحث عن بيت اللاعب فقط
for _, model in ipairs(PlotsFolder:GetChildren()) do
	if model:IsA("Model") then
		local plotSign = model:FindFirstChild("PlotSign")
		if plotSign and plotSign:IsA("BasePart") then
			local surfaceGui = plotSign:FindFirstChildWhichIsA("SurfaceGui")
			if surfaceGui then
				local frame = surfaceGui:FindFirstChildWhichIsA("Frame")
				if frame then
					local textLabel = frame:FindFirstChildWhichIsA("TextLabel")
					if textLabel then
						local function isPlayerBase(text)
							local nameOnly = string.match(text, "^(.-)'s Base$")
							return nameOnly == playerDisplayName
						end

						if isPlayerBase(textLabel.Text) then
							-- Create invisible part above player base
							local part = Instance.new("Part")
							part.Anchored = true
							part.CanCollide = false
							part.Transparency = 1
							part.Size = Vector3.new(0.5, 0.5, 0.5)
							part.Position = model:GetModelCFrame().p + Vector3.new(0, 6, 0)
							part.Parent = workspace

							-- BillboardGui
							local billboard = Instance.new("BillboardGui")
							billboard.Size = UDim2.new(0, 150, 0, 30)
							billboard.StudsOffset = Vector3.new(0, 1.5, 0)
							billboard.AlwaysOnTop = true
							billboard.Adornee = part
							billboard.Parent = part

							local label = Instance.new("TextLabel")
							label.Size = UDim2.new(1, 0, 1, 0)
							label.BackgroundTransparency = 1
							label.TextColor3 = Color3.new(1, 1, 1)
							label.TextStrokeColor3 = Color3.new(0, 0, 0)
							label.TextStrokeTransparency = 0.2
							label.TextScaled = true
							label.Font = Enum.Font.GothamBold
							label.Text = playerDisplayName .. " (Your Base)"
							label.Parent = billboard

							-- تحديث الاسم باستمرار
							while true do
								if textLabel and label then
									local currentText = textLabel.Text
									local nameOnly = string.match(currentText, "^(.-)'s Base$")
									if nameOnly == playerDisplayName then
										label.Text = playerDisplayName .. " (Your Base)"
									else
										label.Text = currentText
									end
								end
								wait(0.5)
							end
						end
					end
				end
			end
		end
	end
end
